<?xml version="1.0" encoding="UTF-8" ?>
<dbSchema xmlns='https://github.com/jeffdcamp/dbtools-gen'
          xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
          xsi:schemaLocation='https://github.com/jeffdcamp/dbtools-gen dbschema.xsd'>
    <database name="main" fieldsDefaultNotNull="true"> <!-- recommended: use fieldsDefaultNotNull="true" to make all table fields default notNull -->
        <table name="cheese">

            <!-- TODO - THIS ID COMES FROM THE SERVER NO PRIMARY KEY NOR AUTO INCREMENT -->
            <field name="id" jdbcDataType="BIGINT" index="true"/>

            <field name="name" jdbcDataType="VARCHAR"/>
            <field name="description" jdbcDataType="VARCHAR"/>
            <field name="image_url" jdbcDataType="VARCHAR"/>
            <field name="cached" jdbcDataType="DATETIME"/>

            <!-- IF NOTHING IS CREATED BY THE USER NO PRIMARY KEY IS NEEDED -->
            <unique sqliteOnConflict="REPLACE">
                <uniqueField name="id"/>
            </unique>
        </table>
        <table name="comment">
            <field name="id" jdbcDataType="BIGINT" primaryKey="true" increment="true"/>
            <field name="cheese_id" jdbcDataType="BIGINT" foreignKeyTable="cheese" foreignKeyField="id"/>
            <field name="user" jdbcDataType="VARCHAR"/>
            <field name="comment" jdbcDataType="VARCHAR"/>
            <field name="created" jdbcDataType="DATE"/>
            <field name="updated" jdbcDataType="DATE" notNull="false"/>
            <field name="cached" jdbcDataType="DATETIME"/>

            <!-- TODO - IF USER CREATABLE CONTENT FIND A KEY YOU CAN GEN THAT MATCHES SERVER-->
            <!-- TODO - GUIDs WORK WELL -->
            <unique>
                <uniqueField name="cheese_id"/>
                <uniqueField name="user"/>
            </unique>
        </table>
    </database>
</dbSchema>